accounting-db:
  image: 'postgres:latest'
accounting-nginx:
  image: 'nginx:latest'
  ports:
    - '8000:8000'
  volumes:
    - '/usr/lib/docker/volumes/accounting/nginx/conf:/etc/nginx/conf.d'
    - '/usr/lib/docker/volumes/accounting/dist:/dist'
  links:
    - accounting-py
accounting-py:
  image: 'btobias92/accounting:latest'
  command: 'bash -c "python manage.py makemigrations && python manage.py migrate && gunicorn dj.wsgi -b 0.0.0.0:8000"'
  links:
    - accounting-db
  volumes:
    - '/usr/lib/docker/volumes/accounting/dist:/dist'
  expose:
    - '8000'