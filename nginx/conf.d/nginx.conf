upstream accounting-py {
    ip_hash;
    server accounting-py:8000;
}

# portal
server {
    location / {
        proxy_pass http://accounting-py/;
        auth_basic "Restricted";
        auth_basic_user_file /etc/nginx/.htpasswd;
    }
    location /static/ {
        autoindex on;
        alias /dist/;
    }
    listen 8000;
    server_name localhost;
}